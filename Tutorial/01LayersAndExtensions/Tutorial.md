#Небольшая предыстория
И так, что же за слои и расширения в Vulkan?
+ **Слоем** называют специальное дополнение, которым передают вызов той или функции Vulkan, прежде чем она достигнет ядра. Слоёв может быть несколько, и каждый занят своей определённой работой. Причём, при определённом условии слой может не передать вызов функции дальше (например, при ошибке, чтобы не навредить тем самым приложению, драйверу и/или устройству). Слоёв может быть несколько, и вызов функции должен будет пройти через все слои, прежде чем достичь ядра Vulkan. Тем не менее, по умолчанию все слои отключены, дабы ускорить процесс отрисовки кадра. Тем не менее, слой обычно не добавляет дополнительный функционал, а лишь исследует вызов функции, поэтому, основное их предназночение — проверка и отладка. И разрабочики слоёв бывают разные. Их мужно определить по названию: VK_LAYER_[имя_разработчика]_[название_слоя]. Перечеслю мне известные слои:
  + `VK_LAYER_GOOGLE_unique_objects` — помещает все объекты в unique pointer (уникальный указатель), и разыменовывает при использовании.
  + `VK_LAYER_LUNARG_api_dump` — выводит все вызовы функций, их параметры и значения. 
  + `VK_LAYER_LUNARG_device_limits` — проверяет, а не слишком и вы обжорливый. Т.е. проверка ваших параметров на то, чтобы они соответствовали лимитам устройства.
  + `VK_LAYER_LUNARG_core_validation` — проверяет сеты дескрипторов (descriptor set), состояния конвейера (pipeline state), проверяет интерфейсы между модулем SPIR-V и графическим конвейером, выполняет трасировку и проверку GPU памяти, а также её привязку ко объектам и командным буферам.
  + `VK_LAYER_LUNARG_image` — проверяет форматы текстур и целей отрисовки (render target).
  + `VK_LAYER_LUNARG_object_tracker` — трассирует объекты Vulkan, неверные флаги и утечки памяти объектов.
  + `VK_LAYER_LUNARG_parameter_validation` — проверяет параметры, передаваемые в функции.
  + `VK_LAYER_LUNARG_swapchain` — проверяет WSI расширение swapchain на правильное использование.
  + `VK_LAYER_GOOGLE_threading` — проверяет правильное использование API в мульти-поточном приложении.
  + `VK_LAYER_LUNARG_standard_validation` — мета-слой, при включении которого включает следующие слои:
    + `VK_LAYER_GOOGLE_threading`
    + `VK_LAYER_LUNARG_parameter_validation`
    + `VK_LAYER_LUNARG_device_limits`
    + `VK_LAYER_LUNARG_object_tracker`
    + `VK_LAYER_LUNARG_image`
    + `VK_LAYER_LUNARG_core_validation`
    + `VK_LAYER_LUNARG_swapchain`
    + `VK_LAYER_GOOGLE_unique_objects`
  + `VK_LAYER_LUNARG_vktrace` — слой, который не нужно включать вручную. Он нужен для трассировки приложения через утилиту vktrace. После этого можно будет воспользоваться утилитой vkreplay (подробнее об этом будет в одном из следующих уроков).
  + `VK_LAYER_RENDERDOC_Capture` — этот слой также не следует включать вручную. Нужен для программы RenderDoc, которое сделает отладку приложения ещё более удобной.
  + `VK_LAYER_NV_optimus` — включает технологию NVIDIA Optimus. ~~Экономия заряда батареи? Что? Что зелёные курят и почему со мной не поделились?~~
  + `VK_LAYER_VALVE_steam_overlay` — слой для Steam Overlay. Как он работает и что делает? А хрен его знает!
+ **Расширение** — это дополнение, которое предоставляет дополнительный функционал в Vulkan. Дополнения могут быть совершенно разными, например:
  + WSI — несколько расширений, с помощью которых настраивается вывод в окно или на экран (Vulkan по умолчанию не привязывается к окну).
  + Debug Report — можно указать свои callback-функции, которые будут вызываться из проверочных слоёв для передачи определённой инормации.
  + [Расширение растерезации от AMD](http://gpuopen.com/unlock-the-rasterizer-with-out-of-order-rasterization/ "Перейти к описанию") — похоже, доступно только для обладателей *"красных"* видеокарт. Что это такое и как оно работает — можете прочитать потом сами.
  + Расширение от NVIDIA — поддержка GLSL шейдера напрямую, без трансляции в SPIR-V (короче — **костыль**, забудьте про это расширение, когда захотите сделать что-то серьёзное).
  + [Расширение от Khronos Group](https://www.khronos.org/registry/vulkan/specs/1.0-wsi_extensions/xhtml/vkspec.html#_vk_khr_sampler_mirror_clamp_to_edge "Подробнее"), которое позволяет создавать семплеры, где их UVW пространство может быть отражено.
  + И другие, которые возможно уже вышли, а возможно ещё нет.

Кстати, некоторые слои могут использовать расширения, если такие включены в работу. Например, некоторые проверочные слои могут использовать отладочное расширение. И поэтому я хочу рассказать в этом уроке именно об этом — отладке с помощью проверочных слоёв и отладочного расширения.